<properties 
   pageTitle="StorSimple 장애 조치(failover) 및 재해 복구 | Microsoft Azure"
   description="자체적으로, 다른 실제 장치 또는 가상 장치로 StorSimple 장치의 장애를 조치하는 방법을 알아봅니다."
   services="storsimple"
   documentationCenter=""
   authors="alkohli"
   manager="carmonm"
   editor="" />
<tags 
   ms.service="storsimple"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/16/2016"
   ms.author="alkohli" />

# StorSimple 장치에 대한 장애 조치 및 재해 복구

## 개요

이 자습서에서는 재해 발생 시 StorSimple의 장애 조치에 필요한 단계를 설명합니다. 장애 조치를 사용하면 데이터 센터의 원래 장치에서 동일하거나 다른 지리적 위치에 있는 다른 실제 장치 또는 가상 장치에도 데이터를 마이그레이션할 수 있습니다.

재해 복구(DR)는 장치 장애 조치 기능을 통해 조정되며 **장치** 페이지에서 시작됩니다. 이 페이지는 StorSimple 관리자 서비스에 연결된 모든 StorSimple 장치를 표로 작성합니다. 각 장치에 대해 친숙한 이름, 상태, 프로비전된 용량 및 최대 용량, 유형 및 모델이 표시됩니다.

![장치 페이지](./media/storsimple-device-failover-disaster-recovery/IC740972.png)

이 자습서의 지침은 모든 소프트웨어 버전에서 StorSimple 물리적 및 가상 장치에 적용됩니다.



## DR(재해 복구) 및 장치 장애 조치

DR(재해 복구) 시나리오에서 기본 장치가 작동을 중지합니다. 이 상황에서 기본 장치를 *원본*으로 사용하고 다른 장치를 *대상*으로 지정하여장애 장치와 연결된 클라우드 데이터를 다른 장치로 옮길 수 있습니다. 대상 장치로 마이그레이션할 볼륨 컨테이너를 하나 이상 선택할 수 있습니다. 이 프로세스는 *장애 조치*라고 합니다.

장애 조치 중 원본 장치의 볼륨 컨테이너는 소유권을 변경하고 대상 장치로 전송됩니다. 볼륨 컨테이너가 소유권을 변경하면 원본 장치에서 컨테이너가 삭제됩니다. 삭제가 완료되면 대상 장치를 장애 복구(failback)할 수 있습니다.

일반적으로 DR 다음으로 가장 최근의 백업은 대상 장치에 데이터를 복원하는 데 사용됩니다. 그러나 동일한 볼륨에 여러 백업 정책이 있는 경우 가장 큰 볼륨의 백업 정책을 선택하고 대상 장치에서 데이터를 복원하는 데 해당 정책에서 가장 최근의 백업을 사용합니다.

예를 들어 세부 정보가 다음과 같은 두 개의 백업 정책(하나는 기본이고 하나는 사용자 지정)인 *defaultPol*, *customPol*이 있는 경우입니다.

- *defaultPol* : 하나의 볼륨(*vol1*)이 매일 오후 10시 30분부터 실행됩니다.
- *customPol* : 4개의 볼륨(*vol1*, *vol2*, *vol3*, *vol4*)이 매일 오후 10시부터 실행됩니다.

이 경우에 더 많은 볼륨을 포함하고 크래시 일관성에 대한 우선 순위를 지정한 *customPol*을 사용합니다. 이 정책에서 가장 최근의 백업은 데이터를 복원하는 데 사용됩니다.


## 장치 장애 조치에 대한 고려 사항

재해가 발생할 경우 다음과 같이 StorSimple 장치에 장애 조치를 선택할 수 있습니다.

- 실제 장치로
- 자체적으로
- 가상 장치로

모든 장치 장애 조치에 대해 다음 사항을 주의합니다.

- DR의 필수 조건은 볼륨 컨테이너 내의 모든 볼륨을 오프라인이어야 하고 볼륨 컨테이너에는 연결된 클라우드 스냅숏이 있어야 한다는 것입니다.
- DR에 사용 가능한 대상 장치는 선택한 볼륨 컨테이너를 수용하기에 충분한 공간이 있는 장치입니다.
- 서비스에 연결되어 있지만 충분한 공간 조건을 충족하지 않는 장치는 대상 장치로 사용할 수 없습니다.
- 장치는 클라우드에서 데이터에 액세스한 후 로컬로 저장해야 하므로, DR 이후의 제한된 기간 동안 데이터 액세스 성능이 지대한 영향을 받을 있습니다.

#### 여러 소프트웨어 버전 간의 장치 장애 조치(Failover)

배포의 StorSimple Manager 서비스에 서로 다른 소프트웨어 버전을 실행하는 여러 장치(물리적 및 가상)가 있을 수 있습니다. 소프트웨어 버전에 따라 장치의 볼륨 유형도 다를 수 있습니다. 예를 들어 업데이트 2 이상을 실행하는 장치에는 로컬로 고정된 볼륨과 계층화된 볼륨(아카이브 볼륨은 계층화된 볼륨의 하위 집합)이 있을 수 있습니다. 한편, 사전 업데이트 2 장치에는 계층화된 볼륨과 아카이브 볼륨이 있을 수 있습니다.

다음 표를 사용하여 다른 소프트웨어 버전을 실행하는 다른 장치로 장애 조치(failover)할 수 있는지 여부 및 DR 중 볼륨 유형의 동작을 결정할 수 있습니다.

| 장애 조치 대상 | 물리적 장치에 허용됨 | 가상 장치에 허용됨 |
|----------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
| 업데이트 2에서 사전 업데이트 1(릴리스, 0.1, 0.2, 0.3)로 | 아니요 | 아니요 |
| 업데이트 2에서 업데이트 1(1, 1.1, 1.2)로 | 예<br></br>로컬로 고정되거나 계층화된 볼륨 또는 이 둘의 조합을 사용하는 경우 볼륨은 항상 계층화된 것으로 장애 조치(failover)됩니다. | 예<br></br>로컬로 고정된 볼륨을 사용하는 경우 계층화된 것으로 장애 조치(failover)됩니다. |
| 업데이트 2에서 업데이트 2(이후 버전)로 | 예<br></br>로컬로 고정되거나 계층화된 볼륨 또는 이 둘의 조합을 사용하는 경우 볼륨은 항상 시작 볼륨 유형으로 계층화됩니다(계층화의 경우 계층화, 로컬로 고정된 경우 로컬로 고정). | 예<br></br>로컬로 고정된 볼륨을 사용하는 경우 계층화된 것으로 장애 조치(failover)됩니다. |


#### 여러 소프트웨어 버전 간의 부분 장애 조치(failover)

사전 업데이트 1을 실행하는 StorSimple 원본 장치를 사용하여 업데이트 1 이상을 실행하는 대상으로 부분 장애 조치(failover)를 수행하려는 경우 이 지침을 따르세요.


| 다음에서 부분 장애 조치(failover) | 물리적 장치에 허용됨 | 가상 장치에 허용됨 |
|----------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|사전 업데이트 1(릴리스, 0.1, 0.2, 0.3)에서 업데이트 1 이상으로 | 예, 모범 사례 팁은 아래를 참조하세요. | 예, 모범 사례 팁은 아래를 참조하세요. |


>[AZURE.TIP] 업데이트 1 이상 버전에서 클라우드 메타데이터 및 데이터 서식이 변경되었습니다. 따라서 사전 업데이트 1에서 업데이트 1 이상 버전으로의 부분 장애 조치(failover)는 바람직하지 않습니다. 부분 장애 조치(failover)를 수행해야 하는 경우 두 장치(원본 및 대상)에서 먼저 업데이트 1 이상을 적용한 다음 장애 조치(failover)를 진행하는 것이 좋습니다.

## 다른 실제 장치로 장애 조치

대상 실제 장치에 장치를 복원하려면 다음 단계를 수행합니다.

1. 장애 조치하려는 볼륨 컨테이너에 연결된 클라우드 스냅숏이 있는지 확인합니다.

1. **장치** 페이지에서 **볼륨 컨테이너** 탭을 클릭합니다.

1. 다른 장치에 장애 조치하려는 볼륨 컨테이너를 선택합니다. 볼륨 컨테이너를 클릭하여 이 컨테이너 내에 볼륨의 목록을 표시합니다. 볼륨을 선택하고 **오프라인으로 전환**을 클릭하여 볼륨을 오프라인으로 전환합니다. 볼륨 컨테이너의 모든 볼륨에 이 프로세스를 반복합니다.

1. 다른 장치에 장애 조치하려는 모든 볼륨 컨테이너에 이전 단계를 반복합니다.

1. **장치** 페이지에서 **장애 조치**를 클릭합니다.

1. 열리는 마법사의 **장애 조치할 볼륨 컨테이너 선택**에서:

	1. 볼륨 컨테이너 목록에서 장애 조치할 볼륨 컨테이너를 선택합니다. **클라우드 스냅숏과 연결된 볼륨 컨테이너와 오프라인 볼륨만 표시됩니다.**

	1. 선택한 컨테이너의 볼륨에 대한 **대상 장치 선택** 아래에서 사용 가능한 장치의 드롭다운 목록에서 대상 장치를 선택합니다. 사용할 용량이 있는 장치만 드롭다운 목록에 표시됩니다.

	1. 마지막으로 **장애 조치 확인**에서 모든 장애 조치 설정을 검토합니다. 확인 아이콘![확인 아이콘](./media/storsimple-device-failover-disaster-recovery/IC740895.png)을 클릭합니다.

1. 장애 조치(failover) 작업은 **작업** 페이지를 통해 모니터링할 수 있도록 만들어집니다. 장애 조치된 볼륨 컨테이너에 로컬 볼륨이 있는 경우 컨테이너에서 (계층화된 볼륨이 아닌) 각 로컬 볼륨에 대한 개별 복원 작업이 표시됩니다. 이러한 복원 작업을 완료하려면 상당한 시간이 걸릴 수 있습니다. 장애 조치 작업이 이전에 완료될 가능성이 있습니다. 이러한 볼륨은 복원 작업이 완료된 후에 로컬 보장을 갖습니다. 장애 조치를 완료한 후 **장치** 페이지로 이동합니다.

	1. 장애 조치 프로세스에 대한 대상 장치로 사용된 장치를 선택합니다.

	1. **볼륨 컨테이너** 페이지로 이동합니다. 이전 장치의 볼륨과 함께 모든 볼륨 컨테이너가 나열됩니다.

## 단일 장치를 사용하여 장애 조치

단일 장치만 있고 장애 조치를 수행해야 하는 경우 다음 단계를 수행합니다.

1. 장치에서 모든 볼륨의 클라우드 스냅숏을 마련합니다.

1. 장치를 공장 기본값으로 다시 설정합니다. [StorSimple 장치를 공장 기본 설정으로 다시 설정하는 방법](storsimple-manage-device-controller.md#reset-the-device-to-factory-default-settings)의 자세한 지침에 따릅니다.

1. 장치를 구성하고 StorSimple 관리자 서비스로 다시 등록 합니다.

1. **장치** 페이지에서 이전 장치는 **오프 라인**로 표시되어야 합니다. 새로 등록된 장치는 **온라인**으로 표시되어야 합니다.

1. 새 장치의 경우 먼저 최소 장치 구성을 완료합니다.
												
	>[AZURE.IMPORTANT] **최소 구성을 먼저 완료하지 않으면 현재 구현에서 버그의 결과로 DR이 실패합니다. 이 동작은 이후 릴리스에서 수정될 예정입니다.**

1. 이전 장치(오프 라인 상태)를 선택하고 **장애 조치**를 클릭합니다. 표시되는 마법사에서 이 장치를 장애 조치하고 대상 장치를 새로 등록된 장치로 지정합니다. 자세한 지침은 [다른 실제 장치에 장애 조치](#fail-over-to-another-physical-device)를 참조하세요.

1. **작업** 페이지에서 모니터링할 수 있는 장치 복원 작업이 만들어집니다.

1. 작업이 성공적으로 완료되면 새 장치에 액세스하고 **볼륨 컨테이너** 페이지로 이동합니다. 이전 장치의 모든 볼륨 컨테이너는 이제 새 장치에 마이그레이션해야 합니다.

## StorSimple 가상 장치로 장애 조치

만들어진 StorSimple 가상 장치가 있어야 하며 이 절차를 실행하기 전에 구성해야 합니다. 업데이트 2를 실행하는 경우 64TB이고 프리미엄 저장소를 사용하는 8020 가상 장치를 DR에 사용하는 것이 좋습니다.
 
대상 StorSimple 가상 장치에 장치를 복원하려면 다음 단계를 수행합니다.

1. 장애 조치하려는 볼륨 컨테이너에 연결된 클라우드 스냅숏이 있는지 확인합니다.

1. **장치** 페이지에서 **볼륨 컨테이너** 탭을 클릭합니다.

1. 다른 장치에 장애 조치하려는 볼륨 컨테이너를 선택합니다. 볼륨 컨테이너를 클릭하여 이 컨테이너 내에 볼륨의 목록을 표시합니다. 볼륨을 선택하고 **오프라인으로 전환**을 클릭하여 볼륨을 오프라인으로 전환합니다. 볼륨 컨테이너의 모든 볼륨에 이 프로세스를 반복합니다.

1. 다른 장치에 장애 조치하려는 모든 볼륨 컨테이너에 이전 단계를 반복합니다.

1. **장치** 페이지에서 **장애 조치**를 클릭합니다.

1. 열리는 마법사의 **장애 조치할 볼륨 컨테이너 선택**에서 다음을 완료합니다.
													
	a. 볼륨 컨테이너 목록에서 장애 조치할 볼륨 컨테이너를 선택합니다.

	**클라우드 스냅숏과 연결된 볼륨 컨테이너와 오프라인 볼륨만 표시됩니다.**

	b. **선택한 컨테이너에서 볼륨에 대한 대상 장치 선택**의 사용 가능한 장치 드롭다운 목록에서 StorSimple 가상 장치를 선택합니다. **충분한 용량이 있는 장치만 드롭다운 목록에 표시됩니다.**
	

1. 마지막으로 **장애 조치 확인**에서 모든 장애 조치 설정을 검토합니다. 확인 아이콘![확인 아이콘](./media/storsimple-device-failover-disaster-recovery/IC740895.png)을 클릭합니다.

1. 장애 조치를 완료한 후 **장치** 페이지로 이동합니다.
													
	a. 장애 조치 프로세스에 대한 대상 장치로 사용된 StorSimple 가상 장치를 선택합니다.
	
	b. **볼륨 컨테이너** 페이지로 이동합니다. 이제 이전 장치의 볼륨과 함께 모든 볼륨 컨테이너가 나열됩니다.

![동영상 사용 가능](./media/storsimple-device-failover-disaster-recovery/Video_icon.png) **동영상 사용 가능**

장애 조치(Failover)된 물리적 장치를 클라우드의 가상 장치로 복원하는 방법을 보여 주는 동영상을 시청하려면 [여기](https://azure.microsoft.com/documentation/videos/storsimple-and-disaster-recovery/)를 클릭하세요.


## 장애 복구

업데이트 3 이상 버전의 경우 StorSimple도 장애 복구를 지원합니다. 장애 조치(Failover)가 완료되면 다음 작업이 발생합니다.

- 장애 조치되는 볼륨 컨테이너는 원본 장치에서 정리됩니다.

- 볼륨 컨테이너당 백그라운드 작업(장애 조치됨)이 원본 장치에서 시작됩니다. 작업이 진행 중인 동안 장애 복구를 시도하면 결과에 대한 알림이 수신됩니다. 장애 복구를 시작하려면 해당 작업이 완료될 때까지 기다려야 합니다.

	볼륨 컨테이너의 삭제를 완료하는 시간은 데이터의 양, 데이터의 사용 기간, 백업 수 및 작업에 사용 가능한 네트워크 대역폭 등과 같은 다양한 요소에 따라 달라집니다. 테스트 장애 조치/장애 복구를 계획 중인 경우 적은 양의 데이터(Gbs)가 있는 볼륨 컨테이너를 테스트하는 것이 좋습니다. 대부분의 경우 장애 조치가 완료되고 24시간 후에 장애 복구를 시작할 수 있습니다.




## 질문과 대답

Q. **DR이 실패하거나 부분적으로 성공한 경우 어떻게 되나요?**

A. DR이 실패하면 다시 시도하는 것이 좋습니다. 두 번째 시기에 DR은 모두 완료된 것이 무엇이고 프로세스가 처음으로 중단된 때가 언제인지 알고 있습니다. 해당 지점부터 DR 프로세스를 시작합니다.

Q. **장치 장애 조치를 진행 중인 동안에 장치를 삭제할 수 있나요?**

A. DR을 진행 중인 동안에는 장치를 삭제할 수 없습니다. DR이 완료된 후에만 장치를 삭제할 수 있습니다.

Q. **원본 장치에 있는 로컬 데이터를 삭제하도록 원본 장치에서 언제 가비지 수집이 시작되나요?**

A. 가비지 수집은 장치가 완전히 정리된 후에만 원본 장치에서 사용할 수 있습니다. 정리에는 볼륨, 백업 개체(데이터 아님), 볼륨 컨테이너 및 정책 등 원본 장치에서 장애 조치한 개체를 정리하는 것이 포함됩니다.

Q. **원본 장치에서 볼륨 컨테이너와 연결된 삭제 작업이 실패하면 어떻게 되나요?**

A. 삭제 작업이 실패하면 볼륨 컨테이너의 삭제를 수동으로 트리거해야 합니다. **장치** 페이지에서 원본 장치를 선택하고 **볼륨 컨테이너**를 클릭합니다. 장애 조치한 볼륨 컨테이너를 선택하고 페이지 하단에서 **삭제**를 클릭합니다. 원본 장치에서 장애 조치한 모든 볼륨 컨테이너를 삭제했으면 장애 복구를 시작할 수 있습니다.

## 비즈니스 연속성 재해 복구(BCDR)

비즈니스 연속성 재해 복구(BCDR) 시나리오는 전체 Azure 데이터 센터의 작동이 중지되는 경우 발생합니다. StorSimple 관리자 서비스 및 연결된 StorSimple 장치에 영향을 줄 수 있습니다.

재해가 발생하기 직전에 등록된 StorSimple 장치가 있으면 이러한 StorSimple 장치는 공장 재설정을 거쳐야 할 수도 있습니다. 재해가 발생한 후 StorSimple 장치가 오프라인으로 나타납니다. 포털에서 StorSimple 장치를 삭제하고 공장 재설정한 뒤에 새로 등록해야 합니다.


## 다음 단계

- 장애 조치(failover)를 수행한 후에 [StorSimple 장치 비활성화 또는 삭제](storsimple-deactivate-and-delete-device.md)를 해야 할 수도 있습니다.

- StorSimple Manager 서비스를 사용하는 방법에 대한 자세한 내용을 보려면 [StorSimple Manager 서비스를 사용하여 StorSimple 장치 관리](storsimple-manager-service-administration.md)로 이동하세요.
 

<!---HONumber=AcomDC_0921_2016-->