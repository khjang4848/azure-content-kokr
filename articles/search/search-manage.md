<properties 
	pageTitle="Microsoft Azure에서 검색 서비스 관리 | Microsoft Azure | 호스트된 클라우드 검색 서비스" 
	description="Microsoft Azure에서 호스팅되는 클라우드 검색 서비스인 Azure 검색 관리" 
	services="search" 
	documentationCenter="" 
	authors="HeidiSteen" 
	manager="jhubbard" 
	editor=""
    tags="azure-portal"/>

<tags 
	ms.service="search" 
	ms.devlang="rest-api" 
	ms.workload="search" 
	ms.topic="article" 
	ms.tgt_pltfrm="na" 
	ms.date="05/17/2016" 
	ms.author="heidist"/>

# Microsoft Azure에서 검색 서비스 관리
> [AZURE.SELECTOR]
- [포털](search-manage.md)
- [PowerShell](search-manage-powershell.md)
- [REST API](search-get-started-management-api.md)

Azure 검색은 사용자 지정 검색 응용 프로그램에서 HTTP 기반 API가 있는 클라우드 기반 서비스입니다. 검색 서비스는 전체 텍스트 검색 텍스트 분석, 고급 검색 기능, 검색 데이터 저장소 및 쿼리 명령 구문을 위한 엔진을 제공합니다.

이 문서에서는 [Azure 포털](https://portal.azure.com)에서 검색 서비스를 관리하는 방법을 설명합니다. 또한 새 검색 트래픽 분석 기능을 사용하여 인덱스 수준에서 작업에 대한 정보를 얻을 수 있습니다. 시작하려면 [Azure 검색을 위한 검색 트래픽 분석](search-traffic-analytics.md)을 방문하세요.

또는 관리 REST API를 사용할 수 있습니다. 자세한 내용은 [Azure 검색 관리 REST API 시작](search-get-started-management-api.md) 및 [Azure 검색 관리 REST API 참조](http://msdn.microsoft.com/library/azure/dn832684.aspx)를 참조하세요.

<a id="sub-1"></a>
## 구독에 검색 서비스 추가

검색 서비스를 설정하는 관리자로서 첫 번째 결정 사항의 하나는 가격 책정 계층을 선택하는 것입니다. 옵션에는 무료 및 표준 가격 책정 계층이 포함됩니다.

기존 구독자는 학습 목적, 개념 증명 테스트 및 소규모 개발 프로젝트에 권장되는 공유 서비스를 무료로 선택할 수 있습니다. 공유 서비스는 저장소 50MB, 인덱스 3개 및 문서 수(저장소 사용이 허용된 전체 50MB 미만인 경우에도 문서 10,000개 고정 한도)로 제한됩니다. 공유 서비스에는 성능 보장이 없으므로 프로덕션 검색 응용 프로그램을 작성하는 경우 표준 검색을 사용하는 것이 좋습니다.

사용자 구독에서만 사용되는 전용 리소스 및 인프라를 등록하기 때문에 기본 및 표준 검색은 청구 가능합니다. 기본 및 표준 검색은 파티션(저장소) 및 복제본(서비스 워크로드)의 사용자 정의 번들로 할당되며 검색 단위로 가격이 책정됩니다. 필요한 리소스를 더 추가하여 파티션 또는 복제본을 독립적으로 확장할 수 있습니다.

용량을 계획하고 청구 영향을 이해하려면 다음 링크를 참조하세요.

+	[한도 및 제약 조건](search-limits-quotas-capacity.md)
+	[가격 정보](http://go.microsoft.com/fwlink/p/?LinkdID=509792)

등록할 준비가 되면 [포털에 검색 서비스 만들기](search-create-service-portal.md)를 참조하세요.

##검색 분석

검색 서비스의 성능, 사용되는 용어, 사용되는 용어의 적중 반환 여부를 이해하기 위하여 사용자 검색 활동에 대한 데이터 수집을 사용하도록 설정할 수 있습니다. 이러한 데이터를 분석하고 시각화하는 가장 좋은 방법은 Power BI 콘텐츠 팩을 사용하는 것입니다. 첫 번째 단계는 검색 트래픽 분석을 사용하도록 설정하는 것입니다. 방법을 알아보려면 [Azure 검색 트래픽 분석](https://azure.microsoft.com/blog/analyzing-your-azure-search-traffic/)을 참조하세요.

<a id="sub-2"></a>
## 관리 작업

보조 관리자가 있는 서비스도 있지만 Azure Search 서비스는 구독당 한 명의 관리자가 있습니다. 이 섹션에 설명된 작업을 수행하려면 관리자여야 합니다. 구독에 Search를 추가하는 것 외에도 관리자는 다음 추가 작업을 담당합니다.

+	서비스 URL 배포(서비스 프로비전 중 정의됨)
+	api-key 관리 및 배포
+	리소스 사용 모니터링
+	확장 또는 축소(표준 검색에만 적용)
+	관리 액세스를 제어하는 역할 설정

<a id="sub-3"></a>
## 서비스 URL

서비스 URL은 서비스를 만들 때 고정 속성으로 정의되며 나중에 변경할 수 없습니다.

검색 응용 프로그램을 작성하는 개발자는 HTTP 요청에 대한 서비스 URL을 알아야 합니다. 서비스 대시보드를 통해 서비스 URL을 신속하게 찾을 수 있습니다.

서비스 대시보드에서 서비스 URL을 가져오려면

1.	[Azure 포털](https://portal.azure.com)에 로그인합니다.
2.	**찾아보기** | **모두** | **검색 서비스**를 클릭합니다.
3.	검색 서비스의 이름을 클릭하여 대시보드를 엽니다.
4.	**속성**을 클릭하여 속성 페이지를 엽니다. 페이지 맨 위에 서비스 URL이 있습니다. 나중에 빨리 액세스하기 위해 이 페이지를 고정할 수 있습니다.

    ![][8]

개발자가 api-version에 대해 물을 수도 있습니다. Azure 검색 API의 코딩 요구 사항에 따르면 항상 요청에 api-version을 지정해야 합니다. 이 요구 사항 때문에 개발자는 이전 버전을 계속 사용한 다음 적절한 시간에 이후 버전으로 이동할 수 있습니다.

api-version은 포털 페이지에 표시되지 않으므로 직접 제공할 수 있는 정보가 아닙니다. 현재 및 이전 API 버전에 대한 자세한 내용은 [Azure 검색 REST API](http://go.microsoft.com/fwlink/p/?LinkdID=509922)를 참조하세요.


<a id="sub-4"></a>
## api-key 관리

검색 응용 프로그램을 작성하는 개발자가 검색에 액세스하려면 api-key가 있어야 합니다. 검색 서비스에 대한 모든 HTTP 요청에는 해당 서비스용으로 생성된 api-key가 필요합니다. 이 api-key는 검색 서비스 URL에 인증하는 유일한 방법입니다.

검색 서비스에 액세스하는 데 사용되는 두 가지 키 유형은 다음과 같습니다.

+	관리(모든 작업에 유효)
+	쿼리(쿼리 요청에만 유효)

관리 api-key는 서비스와 함께 만들어집니다. 기본 키와 보조 키가 있습니다. 두 키를 똑같이 사용할 수 있으며 어떤 키도 상위 또는 하위 액세스 수준을 제공하지 않으므로 키를 롤오버하려는 경우에 유용합니다. 관리 키를 다시 생성할 수 있지만 총 관리 키 수에 추가할 수는 없습니다. 검색 서비스당 최대 두 개의 관리 키가 있을 수 있습니다.

쿼리 키는 검색을 직접 호출하는 클라이언트 응용 프로그램에 사용하도록 설계되었습니다. 최대 50개까지 쿼리 키를 만들 수 있습니다.

api-key를 가져오거나 다시 생성하려면 서비스 대시보드를 엽니다. **키**를 클릭하여 키 관리 페이지를 엽니다. 키를 다시 생성하거나 만드는 명령이 페이지 맨 위에 있습니다.

 ![][9]


<a id="sub-5"></a>
## 리소스 사용 모니터링

이 공개 미리 보기에서는 리소스 모니터링이 서비스 대시보드에 표시되는 정보 및 서비스를 쿼리하여 얻을 수 있는 몇 개의 메트릭으로 제한됩니다.

서비스 대시보드의 사용 섹션에서 파티션 리소스 수준이 응용 프로그램에 적합한지 신속하게 확인할 수 있습니다.

검색 서비스 API를 사용하여 문서 및 인덱스 수를 가져올 수 있습니다. 가격 책정 계층에 따라 이러한 개수와 연결된 고정 한도가 있습니다. 자세한 내용은 [검색 서비스 제한](search-limits-quotas-capacity.md)을 참조하세요.

+	[인덱스 통계 가져오기](http://msdn.microsoft.com/library/dn798942.aspx)
+	[문서 수 계산](http://msdn.microsoft.com/library/dn798924.aspx)

> [AZURE.NOTE] 캐싱 동작 때문에 한도가 일시적으로 과장될 수 있습니다. 예를 들어 공유 서비스를 사용하는 경우 문서 수가 문서 10,000개 고정 한도보다 높게 표시될 수도 있습니다. 과장은 일시적이며 다음 한도 적용 확인 시 검색됩니다.


<a id="sub-6"></a>
## 확장 또는 축소

모든 검색 서비스는 최소 복제본 한 개와 파티션 한 개로 시작됩니다. [기본 또는 표준 가격 책정 계층](search-limits-quotas-capacity.md)을 사용하여 전용 리소스를 등록한 경우 서비스 대시보드의 **크기 조정** 타일을 클릭하여 서비스에서 사용되는 파티션 및 복제본 수를 다시 조정할 수 있습니다.

어느 하나의 리소스를 통해 용량을 추가하면 서비스에서 자동으로 사용합니다. 추가 조치는 필요 없지만 새 리소스의 영향이 나타나기 전에 잠시 지연이 있습니다. 추가 리소스를 프로비전하는 데 15분 이상 걸릴 수 있습니다.

 ![][10]

### 복제본 추가

QPS(초당 쿼리 수)를 높이거나 고가용성을 구현하려면 복제본을 추가합니다. 각 복제본에 하나의 인덱스 사본이 있으므로 복제본을 하나 이상 추가하면 쿼리 요청을 처리하는 데 사용할 수 있는 인덱스도 하나 이상 증가합니다. 경험상, 현재 고가용성을 구현하려면 복제본이 3개 이상 필요합니다(자세한 내용은 [용량 계획](search-capacity-planning.md)을 참조하세요).

더 많은 복제본을 포함하는 검색 서비스는 쿼리 요청의 부하를 다수의 인덱스에 분산할 수 있습니다. 쿼리 볼륨 수준을 감안할 때 요청 처리에 사용할 수 있는 인덱스 사본 수가 더 많으면 쿼리 처리량이 늘어납니다. 쿼리 대기 시간이 발생하는 경우 추가 복제본이 온라인에 있으면 성능이 향상될 수 있습니다.

복제본을 추가하면 쿼리 처리량이 증가하지만 서비스에 복제본을 추가한 만큼 정확히 두 배나 세 배로 증가하는 것은 아닙니다. 모든 검색 응용 프로그램에 적용되는 외부 요인이 쿼리 성능에 영향을 줄 수 있습니다. 복잡한 쿼리와 네트워크 대기 시간은 쿼리 응답 시간 변동에 기여하는 두 가지 요인입니다.

### 파티션 추가

검색을 활용하는 응용 프로그램은 대부분 최대 1500만 개까지 문서를 지원할 수 있는 단일 파티션에 쉽게 들어갈 수 있으므로 대부분의 서비스 응용 프로그램은 기본적으로 파티션보다 추가 복제본을 요구합니다.

문서 수를 늘려야 하는 경우 표준 서비스에 등록했으면 파티션을 추가할 수 있습니다. 기본 계층은 추가 파티션을 제공하지 않습니다.

표준 계층에서 파티션은 12의 배수(특히, 1, 2, 3, 4, 6 또는 12)로 추가됩니다. 이는 분할의 아티팩트입니다. 인덱스는 12개 분할로 만들어지며 모두 하나의 파티션에 저장되거나 2, 3, 4, 6 또는 12개 파티션(파티션당 하나의 분할)에 똑같이 나뉠 수 있습니다.

### 복제본 제거

높은 쿼리 볼륨 기간 후 검색 쿼리 부하가 정규화되면 대체로 복제본을 제거합니다(예: 휴일 할인이 종료된 후).

이렇게 하려면 복제본 슬라이더를 다시 하위 숫자로 이동하면 됩니다. 필요한 추가 단계는 없습니다. 복제본 수를 줄이면 데이터 센터의 가상 컴퓨터가 해제됩니다. 이제 이전보다 적은 VM에서 쿼리 및 데이터 수집 작업이 실행됩니다. 최소 한도는 복제본 한 개입니다.

### 파티션 제거

추가 조치가 필요 없는 복제본 제거와 달리, 줄일 수 있는 것보다 많은 저장소를 사용하는 경우 몇 가지 작업이 필요할 수 있습니다. 예를 들어 솔루션에서 파티션 세 개를 사용하며 감소한 개수의 파티션에 저장할 수 있는 것보다 많은 저장소 공간을 사용하는 경우 파티션을 하나 또는 두 개로 줄이려고 하면 오류가 생성됩니다. 이 경우 연결된 인덱스 내의 문서 또는 인덱스를 삭제하여 공간을 확보하거나 현재 구성을 유지할 수 있습니다.

특정 파티션에 저장되는 인덱스 분할을 알려주는 검색 방법은 없습니다. 각 파티션에서 제공하는 저장소는 대략 25GB이므로 보유한 개수의 파티션에 수용할 수 있는 크기로 저장소를 줄여야 합니다. 파티션 한 개로 되돌리려면 12개 분할이 모두 들어가야 합니다.

미래 계획에 도움이 되도록 저장소를 검사([인덱스 통계 가져오기](http://msdn.microsoft.com/library/dn798942.aspx) 사용)하여 실제로 사용한 크기를 확인하는 것이 좋습니다.

### 여러 데이터 센터에서 확장/축소하고 서비스를 배포하는 모범 사례(비디오)

> [AZURE.VIDEO azurecon-2015-azure-search-best-practices-for-web-and-mobile-applications]


<a id="sub-8"></a>
## 관리자 액세스 권한에 대한 역할 설정

Azure에서는 포털을 통해 관리되거나 사용자 지정 관리 도구를 사용하는 경우 Azure 리소스 관리자 API에서 관리되는 모든 서비스에 대해 전역 역할 기반 권한 부여 모델을 제공합니다. 소유자, 참가자 및 읽기 권한자 역할은 Active Directory 사용자, 그룹 및 각 역할에 할당하는 보안 주체에 대한 서비스 관리 수준을 설정합니다. 역할 멤버 자격에 대한 자세한 내용은 [Azure 클래식 포털의 역할 기반 액세스 제어](../active-directory/role-based-access-control-configure.md)를 참조하세요.

Azure 검색에서는 역할 기반 액세스 제어에 따라 다음 관리 작업이 결정됩니다.


역할|작업
---|---
소유자|서비스를 시작, 중지 또는 삭제합니다.<p>관리 키 및 쿼리 키를 생성하고 봅니다.<p>인덱스 개수, 인덱스 이름, 문서 수 및 저장소 크기를 포함하여 서비스 상태를 봅니다.<p>역할 멤버 자격을 추가하거나 삭제합니다(소유자만 역할 멤버 자격을 관리할 수 있음).<p>구독 및 서비스 관리자는 소유자 역할의 자동 멤버 자격을 갖습니다.
참여자|역할 관리를 제외하고 소유자와 같은 수준의 액세스 권한을 가집니다. 예를 들어, 참여자는 `api-key`를 보고 다시 생성할 수 있지만 역할 멤버 자격을 수정할 수 없습니다.
리더|서비스 상태와 쿼리 키를 봅니다. 이 역할의 멤버는 서비스를 시작하거나 중지할 수 없고 관리 키를 볼 수 없습니다.

역할은 서비스 끝점에 대한 액세스 권한을 부여하지 않습니다. 인덱스 관리, 인덱스 채우기 및 검색 데이터 쿼리와 같은 검색 서비스 작업은 역할이 아니라 api-key를 통해 제어합니다. 자세한 내용은 [Azure 포털의 역할 기반 액세스 제어](../active-directory/role-based-access-control-configure.md)에서 "관리 및 데이터 작업에 대한 권한 부여"를 참조하세요.

역할은 서비스가 만들어진 후 액세스 제어를 제공합니다. 구독 관리자만 구독에 Search 서비스를 추가할 수 있습니다.

<!--Anchors-->
[Add search service to your subscription]: #sub-1
[Administrative tasks]: #sub-2
[Service URL]: #sub-3
[Manage the api-keys]: #sub-4
[Monitor resource usage]: #sub-5
[Scale up or down]: #sub-6
[Set roles to control administrative access]: #sub-8

<!--Image references-->
[8]: ./media/search-manage/Azure-Search-Manage-1-URL.png
[9]: ./media/search-manage/Azure-Search-Manage-2-Keys.png
[10]: ./media/search-manage/Azure-Search-Manage-3-ScaleUp.png


 

<!---HONumber=AcomDC_0914_2016-->